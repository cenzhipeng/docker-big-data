version: "3"
services:
  master:
    build: .
    networks:
      - big-data
    hostname: master
    volumes:
    - ./hadoop-master-config:/home/hadoop/hadoop/etc/hadoop
    - ./data/master:/data
    - ./:/home/hadoop/configs
    command: ["/home/hadoop/configs/master.sh"]

  slave1:
    build: .
    networks:
      - big-data
    hostname: slave1
    volumes:
    - ./hadoop-master-config:/home/hadoop/hadoop/etc/hadoop
    - ./data/slave1:/data
    - ./:/home/hadoop/configs
    command: ["/home/hadoop/configs/slaver.sh"]
    depends_on:
      - master

  slave2:
    build: .
    networks:
      - big-data
    hostname: slave2
    volumes:
      - ./hadoop-master-config:/home/hadoop/hadoop/etc/hadoop
      - ./data/slave2:/data
      - ./:/home/hadoop/configs
    command: ["/home/hadoop/configs/slaver.sh"]
    depends_on:
      - master

networks:
  big-data: